<html>
<head>
<title>SSH Cert</title>
<meta http-equiv="content-security-policy" content="default-src 'self'; style-src 'unsafe-inline' 'self'; script-src 'unsafe-inline';" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" href="/.sso/favicon.ico" />
<link rel="stylesheet" type="text/css" href="/.sso/style.css" />
<script>
function onClick() {
  const key = document.getElementById('key').value;
  fetch(window.location, {
    method: 'POST',
    headers: {
      'x-csrf-check': 1,
      'content-type': 'text/plain',
    },
    body: key,
  })
  .then(resp => {
    if (resp.status !== 200) {
      return resp.text().then(t => resp.status + ': ' + t);
    }
    return resp.text();
  })
  .then(cert => document.getElementById('cert').textContent = cert);
}
</script>
</head>
<body>
<div id="message">
<div style="display: grid; grid-template-columns: auto auto; grid-gap: 0.5em; align-items: center; justify-content: center; justify-items: center;">
<label for="key" style="white-space: nowrap;">Public Key</label><textarea id="key" style="height: 5em; width: 50vw;"></textarea>
<button onclick="onClick();" style="grid-column: 1 / 3;">Get Certificate</button>
<div id="cert" style="margin-top: 1rem; word-break: break-all; user-select: all; grid-column: 1 / 3; text-align: left;"></div>
</div>
</div>
</body>
</html>
